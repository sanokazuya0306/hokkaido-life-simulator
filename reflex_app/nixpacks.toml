# Nixpacks configuration for Railway
[phases.setup]
nixPkgs = ["nodejs-18_x", "python311"]
aptPkgs = ["curl", "unzip"]

[phases.install]
cmds = [
    "pip install -r requirements.txt",
    "curl -fsSL https://github.com/caddyserver/caddy/releases/download/v2.8.4/caddy_2.8.4_linux_amd64.tar.gz | tar -xz -C /usr/local/bin"
]

[phases.build]
cmds = [
    "export API_URL=http://localhost:8000",
    "reflex init",
    "reflex export --no-zip"
]

[start]
cmd = "chmod +x start.sh && ./start.sh"
